"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function initForm(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=document.getElementById("myInput"),d=document.getElementById("todo-content");n.value=t,d.value=e,document.getElementById("edit-id").value=o}function formToTodoObj(){var t=document.getElementById("myInput").value,e=document.getElementById("todo-content").value;return{id:document.getElementById("edit-id").value,subject:t,content:e}}function removeByIndex(t,e){-1!==e&&t.splice(e,1)}function recoverForm(){document.getElementById("wrap-form").classList.remove("edit"),initForm()}var Todo=function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,t),this.subject=e,this.content=o,this.checked=n},todos=[],saveTodos=function(){localStorage.setItem("todos",JSON.stringify(todos))},loadTodos=function(){console.log("load todos :",todos),document.getElementById("todo-list").innerHTML=todos.map(function(t,e){return'\n            <li class="item-todo collapse dropzone" draggable="true" data-index="'.concat(e,'">\n                <div class="wrap-subject">\n                    <input type="checkbox" class="chk-complete" ').concat(t.checked?"checked":"",' />\n                    <span class="todo-subject ').concat(t.checked?"checked":"",'">').concat(t.subject,'</span>\n                    <div class="buttons">\n                        <button class="evt-edit">수정</button>\n                        <button class="evt-delete">삭제</button>\n                    </div>\n                </div>\n                <div class="content">').concat(t.content,"</div>\n            </li>\n      ")}).join(" ")},initLoadTodo=function(){var t=localStorage.getItem("todos");console.log("localtodos :",t),null===t?todos.push(new Todo("Hit the gym","test"),new Todo("Pay bills","test"),new Todo("Meet George","test",!0),new Todo("Buy eggs","test"),new Todo("Read a book","test"),new Todo("Organize office","test")):todos=JSON.parse(t),loadTodos()};initLoadTodo(),document.getElementById("addTodo").addEventListener("click",function(){var t=formToTodoObj();todos.push(new Todo(t.subject,t.content)),saveTodos(),initForm(),loadTodos()}),document.getElementById("cancel-edit").addEventListener("click",recoverForm),document.getElementById("submit-edit").addEventListener("click",function(){var t=formToTodoObj();todos[t.id].subject=t.subject,todos[t.id].content=t.content,saveTodos(),loadTodos(),recoverForm()}),document.addEventListener("click",function(t){t.preventDefault(),console.log("이벤트 클릭?",t.target);var e=t.target.closest(".buttons"),o=t.target.closest(".collapse");if(console.log("컬랩스? :",o),t.target.className.includes("chk-complete")){var n=o.getAttribute("data-index");return todos[n].checked=t.target.checked,void loadTodos()}if(null==e)null!=o&&(o.classList.contains("on")?(console.log("온 ?",o.className),o.classList.remove("on")):o.className+=" on");else if(t.target.className.includes("evt-edit")){var d=o.getAttribute("data-index");initForm(todos[d].subject,todos[d].content,d),document.getElementById("wrap-form").className+=" edit",document.getElementById("myInput").focus()}else if(t.target.className.includes("evt-delete")&&confirm("정말 삭제하겠습니까?")){var a=o.getAttribute("data-index");removeByIndex(todos,a),saveTodos(),loadTodos()}});var dragged;document.addEventListener("drag",function(t){},!1),document.addEventListener("dragstart",function(t){console.log("음?"),dragged=t.target,dragged.style.opacity=.5},!1),document.addEventListener("dragend",function(t){t.target.style.opacity=""},!1),document.addEventListener("dragover",function(t){t.preventDefault()},!1),document.addEventListener("dragenter",function(t){console.log("drag enter?",t.target),t.target.classList.contains("dropzone")&&(t.target.style.borderBottom=" 2px solid black")},!1),document.addEventListener("dragleave",function(t){t.target.classList.contains("dropzone")&&(t.target.style.borderBottom="")},!1),document.addEventListener("drop",function(t){if(t.preventDefault(),t.target.classList.contains("dropzone")){t.target.style.borderBottom="",dragged.parentNode.removeChild(dragged),t.target.after(dragged);var e=t.target.getAttribute("data-index"),o=dragged.getAttribute("data-index");dragged.setAttribute("data-index",e),t.target.setAttribute("data-index",o);var n=todos[e];todos[e]=todos[o],todos[o]=n,saveTodos()}},!1);